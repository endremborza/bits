import"../chunks/CWj6FrbW.js";import"../chunks/Dljq4_oH.js";import{o as de}from"../chunks/BqR_lnHQ.js";import{F as Pt,E as fe,aW as le,aX as ue,W as ce,Y as F,aY as me,D as he,ad as ft,aZ as pe,a_ as _e,a$ as be,aN as jt,aO as Ht,az as ge,p as Yt,aq as at,a3 as z,L as P,aj as lt,ar as Jt,f as Q,g as y,s as w,r as _,t as et,e as it,z as t,c as j,d as Kt,b as ut,aJ as xe,b0 as Dt,as as It,aV as ye}from"../chunks/DxXDK6DV.js";import{c as we,w as $e,s as E,b as Se,e as Lt}from"../chunks/D0nidhTX.js";import{i as ct}from"../chunks/BT0e9R0P.js";import{c as Fe,e as st,i as nt}from"../chunks/DoAMXx8R.js";import{s as Nt,r as Tt}from"../chunks/dfw2eM_S.js";import{s as Ce}from"../chunks/B2rchkP0.js";import{s as Vt}from"../chunks/DCT14Wlb.js";import{b as Et}from"../chunks/CcnFotdR.js";import{i as Xt}from"../chunks/ZAUOcbv-.js";import{p as xt}from"../chunks/BtRtatVg.js";const ke=()=>performance.now(),X={tick:r=>requestAnimationFrame(r),now:()=>ke(),tasks:new Set};function Qt(){const r=X.now();X.tasks.forEach(e=>{e.c(r)||(X.tasks.delete(e),e.f())}),X.tasks.size!==0&&X.tick(Qt)}function Ae(r){let e;return X.tasks.size===0&&X.tick(Qt),{promise:new Promise(s=>{X.tasks.add(e={c:r,f:s})}),abort(){X.tasks.delete(e)}}}function yt(r,e){$e(()=>{r.dispatchEvent(new CustomEvent(e))})}function Me(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("")}function Wt(r){const e={},s=r.split(";");for(const d of s){const[i,x]=d.split(":");if(!i||x===void 0)break;const n=Me(i.trim());e[n]=x.trim()}return e}const Ie=r=>r;function Ne(r,e,s){var d=Fe,i,x,n,C=null;d.a??(d.a={element:r,measure(){i=this.element.getBoundingClientRect()},apply(){if(n==null||n.abort(),x=this.element.getBoundingClientRect(),i.left!==x.left||i.right!==x.right||i.top!==x.top||i.bottom!==x.bottom){const m=e()(this.element,{from:i,to:x},s==null?void 0:s());n=wt(this.element,m,void 0,1,()=>{n==null||n.abort(),n=void 0})}},fix(){if(!r.getAnimations().length){var{position:m,width:I,height:h}=getComputedStyle(r);if(m!=="absolute"&&m!=="fixed"){var v=r.style;C={position:v.position,width:v.width,height:v.height,transform:v.transform},v.position="absolute",v.width=I,v.height=h;var b=r.getBoundingClientRect();if(i.left!==b.left||i.top!==b.top){var c=`translate(${i.left-b.left}px, ${i.top-b.top}px)`;v.transform=v.transform?`${v.transform} ${c}`:c}}}},unfix(){if(C){var m=r.style;m.position=C.position,m.width=C.width,m.height=C.height,m.transform=C.transform}}}),d.a.element=r}function Zt(r,e,s,d){var i=(r&_e)!==0,x=(r&be)!==0,n=i&&x,C=(r&pe)!==0,m=n?"both":i?"in":"out",I,h=e.inert,v=e.style.overflow,b,c;function q(){var M=ge,W=Pt;jt(null),Ht(null);try{return I??(I=s()(e,(d==null?void 0:d())??{},{direction:m}))}finally{jt(M),Ht(W)}}var k={is_global:C,in(){var M;if(e.inert=h,!i){c==null||c.abort(),(M=c==null?void 0:c.reset)==null||M.call(c);return}x||b==null||b.abort(),yt(e,"introstart"),b=wt(e,q(),c,1,()=>{yt(e,"introend"),b==null||b.abort(),b=I=void 0,e.style.overflow=v})},out(M){if(!x){M==null||M(),I=void 0;return}e.inert=!0,yt(e,"outrostart"),c=wt(e,q(),b,0,()=>{yt(e,"outroend"),M==null||M()})},stop:()=>{b==null||b.abort(),c==null||c.abort()}},O=Pt;if((O.transitions??(O.transitions=[])).push(k),i&&we){var G=C;if(!G){for(var A=O.parent;A&&(A.f&fe)!==0;)for(;(A=A.parent)&&(A.f&le)===0;);G=!A||(A.f&ue)!==0}G&&ce(()=>{F(()=>k.in())})}}function wt(r,e,s,d,i){var x=d===1;if(me(e)){var n,C=!1;return he(()=>{if(!C){var O=e({direction:x?"in":"out"});n=wt(r,O,s,d,i)}}),{abort:()=>{C=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(s==null||s.deactivate(),!(e!=null&&e.duration))return i(),{abort:ft,deactivate:ft,reset:ft,t:()=>d};const{delay:m=0,css:I,tick:h,easing:v=Ie}=e;var b=[];if(x&&s===void 0&&(h&&h(0,1),I)){var c=Wt(I(0,1));b.push(c,c)}var q=()=>1-d,k=r.animate(b,{duration:m,fill:"forwards"});return k.onfinish=()=>{k.cancel();var O=(s==null?void 0:s.t())??1-d;s==null||s.abort();var G=d-O,A=e.duration*Math.abs(G),M=[];if(A>0){var W=!1;if(I)for(var rt=Math.ceil(A/16.666666666666668),H=0;H<=rt;H+=1){var D=O+G*v(H/rt),T=Wt(I(D,1-D));M.push(T),W||(W=T.overflow==="hidden")}W&&(r.style.overflow="hidden"),q=()=>{var N=k.currentTime;return O+G*v(N/A)},h&&Ae(()=>{if(k.playState!=="running")return!1;var N=q();return h(N,1-N),!0})}k=r.animate(M,{duration:A,fill:"forwards"}),k.onfinish=()=>{q=()=>d,h==null||h(d,1-d),i()}},{abort:()=>{k&&(k.cancel(),k.effect=null,k.onfinish=ft)},deactivate:()=>{i=ft},reset:()=>{d===0&&(h==null||h(1,0))},t:()=>q()}}var Te=Q('<div class="dbar small-padded shrinking-font svelte-1umiqn9"> <br/> <br/> </div>'),Ee=Q('<div class="bars svelte-1umiqn9"></div>');function Oe(r,e){Yt(e,!1);const s=P(),d=P();let i=xt(e,"values",24,()=>[1,2,3]),x=xt(e,"colors",24,()=>["red","green","blue"]),n=xt(e,"labels",24,()=>[]),C=xt(e,"maxRate",8,void 0);function m(h,v,b,c){return c==null?h/v*100:h/b/c*100}at(()=>lt(i()),()=>{z(s,i().reduce((h,v)=>h>v?h:v))}),at(()=>lt(i()),()=>{z(d,i().reduce((h,v)=>h+v))}),Jt(),Xt();var I=Ee();st(I,5,i,nt,(h,v,b)=>{var c=Te(),q=y(c),k=w(q,2),O=w(k,2);_(c),et((G,A)=>{Vt(c,`height: ${G??""}%;background-color: ${lt(x()),F(()=>x()[b])??""}`),E(q,`${lt(n()),F(()=>n()[b]||"")??""} `),E(k,` ${A??""}% `),E(O,` (${t(v)??""})`)},[()=>(t(v),t(s),t(d),lt(C()),F(()=>m(t(v),t(s),t(d),C()).toFixed(2))),()=>(t(v),t(d),F(()=>(t(v)/t(d)*100).toFixed(1)))],it),j(h,c)}),_(I),j(r,I),Kt()}function Re(r){const e=r-1;return e*e*e+1}function Be(r,{from:e,to:s},d={}){var{delay:i=0,duration:x=H=>Math.sqrt(H)*120,easing:n=Re}=d,C=getComputedStyle(r),m=C.transform==="none"?"":C.transform,[I,h]=C.transformOrigin.split(" ").map(parseFloat);I/=r.clientWidth,h/=r.clientHeight;var v=ze(r),b=r.clientWidth/s.width/v,c=r.clientHeight/s.height/v,q=e.left+e.width*I,k=e.top+e.height*h,O=s.left+s.width*I,G=s.top+s.height*h,A=(q-O)*b,M=(k-G)*c,W=e.width/s.width,rt=e.height/s.height;return{delay:i,duration:typeof x=="function"?x(Math.sqrt(A*A+M*M)):x,easing:n,css:(H,D)=>{var T=D*A,N=D*M,U=H+D*W,ot=H+D*rt;return`transform: ${m} translate(${T}px, ${N}px) scale(${U}, ${ot});`}}}function ze(r){if("currentCSSZoom"in r)return r.currentCSSZoom;for(var e=r,s=1;e!==null;)s*=+getComputedStyle(e).zoom,e=e.parentElement;return s}const qe=r=>r;function Ut(r,{delay:e=0,duration:s=400,easing:d=qe}={}){const i=+getComputedStyle(r).opacity;return{delay:e,duration:s,easing:d,css:x=>`opacity: ${x*i}`}}var Ge=Q('<div class="svelte-1revm60"><div class="barhead svelte-1revm60"> </div> <div class="barmeat svelte-1revm60"><!></div></div>'),Pe=Q("<th> </th>"),je=Q('<td class="micro-font svelte-1revm60"> </td>'),He=Q('<tr><td class="micro-font svelte-1revm60"> </td><!></tr>'),De=Q('<tr><td class="svelte-1revm60"> </td><td class="svelte-1revm60"> </td><td class="svelte-1revm60"> </td><td class="svelte-1revm60"> </td></tr>'),Le=Q('<p> <b> </b> <!></p> <table class="svelte-1revm60"><thead><tr class="mini-font svelte-1revm60"><th class="svelte-1revm60">Fixture number</th><th id="opphead" class="svelte-1revm60">Opponent</th><th class="svelte-1revm60">Ground</th><th class="svelte-1revm60">Difficulty</th></tr></thead><tbody></tbody></table>',1),We=Q('<div class="controls svelte-1revm60"><div class="svelte-1revm60">A period of <br/> <input type="range" min="3"/> <br/> fixtures</div> <div class="svelte-1revm60">starting with fixture <br/> <input type="range" min="1"/> </div> <div class="svelte-1revm60">Compare teams finishing above and below position <br/> <input type="range" min="1"/> </div> <br/></div> <h3 class="svelte-1revm60"> </h3> <div class="barcontainer svelte-1revm60"></div> <div><table class="svelte-1revm60"><thead><tr class="ulrow svelte-1revm60"><th class="mini-font svelte-1revm60">Head</th><!></tr></thead><tbody></tbody></table></div> <div class="hover-table svelte-1revm60"><!></div>',1);function sr(r,e){Yt(e,!1);const s=P(),d=P(),i=P(),x=P(),n=P();let C="https://tmp-borza-public-cyx.s3.amazonaws.com/assets/data/pl-fixtures.json",m=P({sid:[],date:[],HG:[],AG:[],team:[],opposition:[],points_got:[],goaldiff:[],side:[],fixt:[],season_end_rank:[],did:[]});function I(a){let p,S=[],f=[],o=[];for(let g=0;g<t(m).sid.length;g++){let l=t(m).sid[g];l!=p&&(S.push(l),p=l);let u=t(m).season_end_rank[g];f[u]==null&&(f[u]={}),f[u][l]==null&&(f[u][l]=[]),f[u][l].push(t(m).did[g]),o[u]==null&&(o[u]={}),o[u][l]==null&&(o[u][l]=[]),o[u][l].push({team:t(m).team[g],opposition:t(m).opposition[g],side:t(m).side[g],HG:t(m).HG[g],AG:t(m).AG[g]})}return{seasons:S,positions:f,gameMap:o}}function h(a,p,S,f){const o=[];for(let[g,l]of Object.entries(a.positions)){let u=parseInt(g)<=p?0:1;o.length<=u&&o.push(H.map(()=>0));let B=!1;for(let[Z,R]of Object.entries(l))if(B){let{catI:$}=k(R,S,f);o[u][$]+=1}else B=!0}return o}function v(a){return String(a%100).padStart(2,"0")+"/"+String((a+1)%100).padStart(2,"0")}function b(a){return a==1?"champ":a<5?"top4":a>17?"relegated":""}function c(a){let p="th";return a==1&&(p="st"),a==2&&(p="nd"),a==3&&(p="rd"),`${a}${p}`}function q(a,p,S){let f=0;for(let o=0;o<S;o++)f+=a[p+o];return f/S}function k(a,p,S){let f=q(a,p-1,S),o=0;for(;o<W.length&&f>H[o];)o++;return{cat:W[o],difficulty:f,color:rt[o],catI:o}}function O(a,p,S,f,o){let g=p,l=S,u=f-1;if(p==null){let $=0;for(let[L,Y]of a.positions.entries())if(Y!=null)for(let[tt,dt]of Object.entries(Y)){let J=0;for(let K=0;K<o;K++)J+=dt[u+K];J>$&&($=J,l=L,g=parseInt(tt))}}if(a==null||l==null||g==null)return;let B=a.gameMap[l][g][0].team,Z=[],R=0;for(let $=0;$<o;$++){let L=a.positions[l][g][u];R+=L/o,Z.push({opp:a.gameMap[l][g][u].opposition,side:a.gameMap[l][g][u].side,did:L}),u+=1}return{sid:g,pid:l,team:B,recs:Z,mean:R}}function G(a,p){return a==ot?"all teams, all seasons":p==0?a==1?"eventual champions":`teams finishing top ${a} at the end of the season`:`bottom ${ot-a}`}const A=500,M=300;let W=["easy","mild","hard","brutal"],rt=["#ADE792","#49BEB7","#FACF5A","#FF5959"],H=[7.2,8.9,10.4,20];de(async()=>{z(m,await fetch(C).then(a=>a.json()))});const D=38;let T=P(1),N=P(5),U=P(1),ot=20,vt=P(),mt=P(),te=.45;at(()=>t(T),()=>{z(s,Math.min(D-t(T),8))}),at(()=>t(N),()=>{z(d,D-t(N)+1)}),at(()=>t(m),()=>{z(i,I(t(m)))}),at(()=>(t(i),t(U),t(T),t(N)),()=>{z(x,h(t(i),t(U),t(T),t(N)))}),at(()=>(t(i),t(vt),t(mt),t(T),t(N)),()=>{z(n,O(t(i),t(vt),t(mt),t(T),t(N)))}),Jt(),Xt();var Ot=We();Se(a=>{xe.title="PL Fixture Bits"});var $t=ut(Ot),St=y($t),ht=w(y(St),3);Tt(ht);var ee=w(ht);Dt(2),_(St);var Ft=w(St,2),pt=w(y(Ft),3);Tt(pt);var re=w(pt);_(Ft);var Rt=w(Ft,2),_t=w(y(Rt),3);Tt(_t),Nt(_t,"max",ot);var ae=w(_t);_(Rt),Dt(2),_($t);var Ct=w($t,2),ie=y(Ct);_(Ct);var kt=w(Ct,2);st(kt,13,()=>t(x),nt,(a,p,S)=>{var f=Ge(),o=y(f),g=y(o,!0);_(o);var l=w(o,2),u=y(l);Oe(u,{get labels(){return W},get colors(){return rt},get values(){return t(p)},maxRate:te}),_(l),_(f),et(B=>E(g,B),[()=>(t(U),F(()=>G(t(U),S)))],it),Ne(f,()=>Be,()=>({duration:A})),Zt(1,f,()=>Ut,()=>({duration:M,delay:A/2})),Zt(2,f,()=>Ut,()=>({duration:M})),j(a,f)}),_(kt);var bt=w(kt,2),Bt=y(bt),At=y(Bt),zt=y(At),se=w(y(zt));st(se,1,()=>(t(i),F(()=>t(i).positions)),nt,(a,p,S)=>{var f=It(),o=ut(f);{var g=l=>{var u=Pe(),B=y(u,!0);_(u),et((Z,R)=>{Ce(u,1,`${Z??""} mini-font`,"svelte-1revm60"),E(B,R)},[()=>F(()=>b(S)),()=>F(()=>c(S))],it),j(l,u)};ct(o,l=>{S>0&&l(g)})}j(a,f)}),_(zt),_(At);var qt=w(At);st(qt,5,()=>(t(i),F(()=>t(i).seasons.reverse())),nt,(a,p,S)=>{var f=It(),o=ut(f);{var g=l=>{var u=He(),B=y(u),Z=y(B,!0);_(B);var R=w(B);st(R,1,()=>(t(i),t(p),t(T),t(N),F(()=>t(i).positions.map($=>k($[t(p)],t(T),t(N))))),nt,($,L,Y)=>{var tt=It(),dt=ut(tt);{var J=K=>{var V=je(),Mt=y(V,!0);_(V),et(gt=>{Vt(V,`background-color: ${t(L),F(()=>t(L).color)??""};`),E(Mt,gt)},[()=>(t(L),F(()=>t(L).difficulty.toFixed(1)))],it),Lt("mouseover",V,()=>{z(vt,t(p)),z(mt,Y)}),j(K,V)};ct(dt,K=>{Y>0&&K(J)})}j($,tt)}),_(u),et($=>E(Z,$),[()=>(t(p),F(()=>v(t(p))))],it),j(l,u)};ct(o,l=>{t(i),F(()=>S<t(i).seasons.length-1)&&l(g)})}j(a,f)}),_(qt),_(Bt),_(bt);var Gt=w(bt,2),ne=y(Gt);{var oe=a=>{var p=Le(),S=ut(p),f=y(S),o=w(f),g=y(o,!0);_(o);var l=w(o,2);{var u=R=>{var $=ye("(the hardest)");j(R,$)};ct(l,R=>{t(vt)==null&&R(u)})}_(S);var B=w(S,2),Z=w(y(B));st(Z,5,()=>(t(n),F(()=>t(n).recs)),nt,(R,$,L)=>{var Y=De(),tt=y(Y),dt=y(tt);_(tt);var J=w(tt),K=y(J,!0);_(J);var V=w(J),Mt=y(V,!0);_(V);var gt=w(V),ve=y(gt,!0);_(gt),_(Y),et(()=>{E(dt,`${t(T)+L}.`),E(K,(t($),F(()=>t($).opp))),E(Mt,(t($),F(()=>t($).side))),E(ve,(t($),F(()=>t($).did)))}),j(R,Y)}),_(Z),_(B),et((R,$)=>{E(f,`${R??""}
			- ${t(n),F(()=>t(n).pid)??""}. ${t(n),F(()=>t(n).team)??""} `),E(g,$)},[()=>(t(n),F(()=>v(t(n).sid))),()=>(t(n),F(()=>t(n).mean.toFixed(1)))],it),j(a,p)};ct(ne,a=>{t(n)!=null&&a(oe)})}_(Gt),et(()=>{Nt(ht,"max",t(s)),E(ee,` ${t(N)??""} `),Nt(pt,"max",D-t(N)+1),E(re,` ${t(T)??""}`),E(ae,` ${t(U)??""}`),E(ie,`Difficulty of fixtures ${t(T)??""}-${t(T)+t(N)-1} based on results of last seasons and
	home/away`)}),Et(ht,()=>t(N),a=>z(N,a)),Et(pt,()=>t(T),a=>z(T,a)),Et(_t,()=>t(U),a=>z(U,a)),Lt("mouseleave",bt,()=>{z(mt,void 0),z(vt,void 0)}),j(r,Ot),Kt()}export{sr as component};
