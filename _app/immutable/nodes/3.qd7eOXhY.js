import"../chunks/CWj6FrbW.js";import"../chunks/BPtPTX2S.js";import{o as ge}from"../chunks/Bu_D-iEn.js";import{ax as be,b as we,aC as te,s as Nt,h as G,G as ye,a as Ee,v as r,Z as Y,r as Se,c as Ae,d as Ut,e as It,i as it,ao as Te,ar as Ce,f as ee,g as ae,p as Ne,aD as Ft,av as re,q as ie,al as wt,aE as Dt,aF as Vt,aG as Ht,ac as U,aH as Wt,L as Ie,aI as Fe,aJ as $e,au as ke,aK as Re,aL as Me,aM as Oe,ap as De,E as He,aN as je,aO as Be,j as Le,u as O,aP as ze,aQ as st,aR as Pe,aS as qe,aT as Ge,aj as Zt,ak as Jt,J as Ue,a5 as se,aU as yt,$ as q,w as nt,aV as ne,z as Q,a9 as M,ab as R,aa as F,a7 as at,A as P,a8 as oe,a6 as mt,az as $t}from"../chunks/18rAapEI.js";import{b as Ve,w as We,s as B,e as Ze}from"../chunks/yak5kozi.js";import{i as kt}from"../chunks/BN-_Yo6o.js";import{t as Je,s as fe,a as Rt,b as Mt,r as Ot,c as Ke}from"../chunks/BihA7Ee2.js";import{i as le}from"../chunks/63apQYnn.js";import{p as xt}from"../chunks/BANqw_dX.js";let bt=null;function ot(a,t){return t}function Ye(a,t,e,s){for(var n=[],o=t.length,l=0;l<o;l++)$e(t[l].e,n,!0);var c=o>0&&n.length===0&&e!==null;if(c){var w=e.parentNode;ke(w),w.append(e),s.clear(),W(a,t[0].prev,t[o-1].next)}Re(n,()=>{for(var x=0;x<o;x++){var v=t[x];c||(s.delete(v.k),W(a,v.prev,v.next)),Me(v.e,!c)}})}function ft(a,t,e,s,n,o=null){var l=a,c={flags:t,items:new Map,first:null},w=(t&te)!==0;if(w){var x=a;l=G?Nt(ye(x)):x.appendChild(be())}G&&Ee();var v=null,h=!1,i=Y(()=>{var f=e();return Ie(f)?f:f==null?[]:re(f)});we(()=>{var f=r(i),d=f.length;if(h&&d===0)return;h=d===0;let _=!1;if(G){var y=Se(l)===Ae;y!==(d===0)&&(l=Ut(),Nt(l),It(!1),_=!0)}if(G){for(var A=null,g,m=0;m<d;m++){if(it.nodeType===Te&&it.data===Ce){l=it,_=!0,It(!1);break}var p=f[m],b=s(p,m);g=ve(it,c,A,null,p,b,m,n,t,e),c.items.set(b,g),A=g}d>0&&Nt(Ut())}G||Qe(f,c,l,n,t,s,e),o!==null&&(d===0?v?ee(v):v=ae(()=>o(l)):v!==null&&Ne(v,()=>{v=null})),_&&It(!0),r(i)}),G&&(l=it)}function Qe(a,t,e,s,n,o,l){var X,lt,tt,et;var c=(n&Fe)!==0,w=(n&(Dt|Ht))!==0,x=a.length,v=t.items,h=t.first,i=h,f,d=null,_,y=[],A=[],g,m,p,b;if(c)for(b=0;b<x;b+=1)g=a[b],m=o(g,b),p=v.get(m),p!==void 0&&((X=p.a)==null||X.measure(),(_??(_=new Set)).add(p));for(b=0;b<x;b+=1){if(g=a[b],m=o(g,b),p=v.get(m),p===void 0){var T=i?i.e.nodes_start:e;d=ve(T,t,d,d===null?t.first:d.next,g,m,b,s,n,l),v.set(m,d),y=[],A=[],i=d.next;continue}if(w&&Xe(p,g,b,n),(p.e.f&Ft)!==0&&(ee(p.e),c&&((lt=p.a)==null||lt.unfix(),(_??(_=new Set)).delete(p))),p!==i){if(f!==void 0&&f.has(p)){if(y.length<A.length){var C=A[0],I;d=C.prev;var H=y[0],Z=y[y.length-1];for(I=0;I<y.length;I+=1)Kt(y[I],C,e);for(I=0;I<A.length;I+=1)f.delete(A[I]);W(t,H.prev,Z.next),W(t,d,H),W(t,Z,C),i=C,d=Z,b-=1,y=[],A=[]}else f.delete(p),Kt(p,i,e),W(t,p.prev,p.next),W(t,p,d===null?t.first:d.next),W(t,d,p),d=p;continue}for(y=[],A=[];i!==null&&i.k!==m;)(i.e.f&Ft)===0&&(f??(f=new Set)).add(i),A.push(i),i=i.next;if(i===null)continue;p=i}y.push(p),d=p,i=p.next}if(i!==null||f!==void 0){for(var L=f===void 0?[]:re(f);i!==null;)(i.e.f&Ft)===0&&L.push(i),i=i.next;var J=L.length;if(J>0){var St=(n&te)!==0&&x===0?e:null;if(c){for(b=0;b<J;b+=1)(tt=L[b].a)==null||tt.measure();for(b=0;b<J;b+=1)(et=L[b].a)==null||et.fix()}Ye(t,L,St,v)}}c&&ie(()=>{var vt;if(_!==void 0)for(p of _)(vt=p.a)==null||vt.apply()}),wt.first=t.first&&t.first.e,wt.last=d&&d.e}function Xe(a,t,e,s){(s&Dt)!==0&&Vt(a.v,t),(s&Ht)!==0?Vt(a.i,e):a.i=e}function ve(a,t,e,s,n,o,l,c,w,x){var v=bt,h=(w&Dt)!==0,i=(w&Oe)===0,f=h?i?U(n,!1,!1):Wt(n):n,d=(w&Ht)===0?l:Wt(l),_={i:d,v:f,k:o,a:null,e:null,prev:e,next:s};bt=_;try{return _.e=ae(()=>c(a,f,d,x),G),_.e.prev=e&&e.e,_.e.next=s&&s.e,e===null?t.first=_:(e.next=_,e.e.next=_.e),s!==null&&(s.prev=_,s.e.prev=_.e),_}finally{bt=v}}function Kt(a,t,e){for(var s=a.next?a.next.e.nodes_start:e,n=t?t.e.nodes_start:e,o=a.e.nodes_start;o!==s;){var l=De(o);n.before(o),o=l}}function W(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function ta(a,t,e,s,n,o){var l=a.__className;if(G||l!==e||l===void 0){var c=Je(e,s);(!G||c!==a.getAttribute("class"))&&(c==null?a.removeAttribute("class"):a.className=c),a.__className=e}return o}const ea=()=>performance.now(),V={tick:a=>requestAnimationFrame(a),now:()=>ea(),tasks:new Set};function ue(){const a=V.now();V.tasks.forEach(t=>{t.c(a)||(V.tasks.delete(t),t.f())}),V.tasks.size!==0&&V.tick(ue)}function aa(a){let t;return V.tasks.size===0&&V.tick(ue),{promise:new Promise(e=>{V.tasks.add(t={c:a,f:e})}),abort(){V.tasks.delete(t)}}}function gt(a,t){We(()=>{a.dispatchEvent(new CustomEvent(t))})}function ra(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const t=a.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function Yt(a){const t={},e=a.split(";");for(const s of e){const[n,o]=s.split(":");if(!n||o===void 0)break;const l=ra(n.trim());t[l]=o.trim()}return t}const ia=a=>a;function sa(a,t,e){var s=bt,n,o,l,c=null;s.a??(s.a={element:a,measure(){n=this.element.getBoundingClientRect()},apply(){if(l==null||l.abort(),o=this.element.getBoundingClientRect(),n.left!==o.left||n.right!==o.right||n.top!==o.top||n.bottom!==o.bottom){const w=t()(this.element,{from:n,to:o},e==null?void 0:e());l=Et(this.element,w,void 0,1,()=>{l==null||l.abort(),l=void 0})}},fix(){if(!a.getAnimations().length){var{position:w,width:x,height:v}=getComputedStyle(a);if(w!=="absolute"&&w!=="fixed"){var h=a.style;c={position:h.position,width:h.width,height:h.height,transform:h.transform},h.position="absolute",h.width=x,h.height=v;var i=a.getBoundingClientRect();if(n.left!==i.left||n.top!==i.top){var f=`translate(${n.left-i.left}px, ${n.top-i.top}px)`;h.transform=h.transform?`${h.transform} ${f}`:f}}}},unfix(){if(c){var w=a.style;w.position=c.position,w.width=c.width,w.height=c.height,w.transform=c.transform}}}),s.a.element=a}function Qt(a,t,e,s){var n=(a&qe)!==0,o=(a&Ge)!==0,l=n&&o,c=(a&Pe)!==0,w=l?"both":n?"in":"out",x,v=t.inert,h=t.style.overflow,i,f;function d(){var m=Ue,p=wt;Zt(null),Jt(null);try{return x??(x=e()(t,(s==null?void 0:s())??{},{direction:w}))}finally{Zt(m),Jt(p)}}var _={is_global:c,in(){var m;if(t.inert=v,!n){f==null||f.abort(),(m=f==null?void 0:f.reset)==null||m.call(f);return}o||i==null||i.abort(),gt(t,"introstart"),i=Et(t,d(),f,1,()=>{gt(t,"introend"),i==null||i.abort(),i=x=void 0,t.style.overflow=h})},out(m){if(!o){m==null||m(),x=void 0;return}t.inert=!0,gt(t,"outrostart"),f=Et(t,d(),i,0,()=>{gt(t,"outroend"),m==null||m()})},stop:()=>{i==null||i.abort(),f==null||f.abort()}},y=wt;if((y.transitions??(y.transitions=[])).push(_),n&&Ve){var A=c;if(!A){for(var g=y.parent;g&&(g.f&He)!==0;)for(;(g=g.parent)&&(g.f&je)===0;);A=!g||(g.f&Be)!==0}A&&Le(()=>{O(()=>_.in())})}}function Et(a,t,e,s,n){var o=s===1;if(ze(t)){var l,c=!1;return ie(()=>{if(!c){var y=t({direction:o?"in":"out"});l=Et(a,y,e,s,n)}}),{abort:()=>{c=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(e==null||e.deactivate(),!(t!=null&&t.duration))return n(),{abort:st,deactivate:st,reset:st,t:()=>s};const{delay:w=0,css:x,tick:v,easing:h=ia}=t;var i=[];if(o&&e===void 0&&(v&&v(0,1),x)){var f=Yt(x(0,1));i.push(f,f)}var d=()=>1-s,_=a.animate(i,{duration:w,fill:"forwards"});return _.onfinish=()=>{_.cancel();var y=(e==null?void 0:e.t())??1-s;e==null||e.abort();var A=s-y,g=t.duration*Math.abs(A),m=[];if(g>0){var p=!1;if(x)for(var b=Math.ceil(g/16.666666666666668),T=0;T<=b;T+=1){var C=y+A*h(T/b),I=Yt(x(C,1-C));m.push(I),p||(p=I.overflow==="hidden")}p&&(a.style.overflow="hidden"),d=()=>{var H=_.currentTime;return y+A*h(H/g)},v&&aa(()=>{if(_.playState!=="running")return!1;var H=d();return v(H,1-H),!0})}_=a.animate(m,{duration:g,fill:"forwards"}),_.onfinish=()=>{d=()=>s,v==null||v(s,1-s),n()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=st)},deactivate:()=>{n=st},reset:()=>{s===0&&(v==null||v(1,0))},t:()=>d()}}const na=a=>new Promise(t=>setTimeout(t,a));var oa=Q('<div class="dbar svelte-1dp1ub0"> <br/> <br/> </div>'),fa=Q('<div class="bars svelte-1dp1ub0"></div>');function la(a,t){se(t,!1);const e=U(),s=U();let n=xt(t,"values",24,()=>[1,2,3]),o=xt(t,"colors",24,()=>["red","green","blue"]),l=xt(t,"labels",24,()=>[]),c=xt(t,"maxRate",8,void 0);function w(v,h,i,f){return f==null?v/h*100:v/i/f*100}yt(()=>nt(n()),()=>{q(e,n().reduce((v,h)=>v>h?v:h))}),yt(()=>nt(n()),()=>{q(s,n().reduce((v,h)=>v+h))}),ne(),le();var x=fa();ft(x,5,n,ot,(v,h,i)=>{var f=oa(),d=M(f),_=R(d,2),y=R(_,2);F(f),at((A,g)=>{fe(f,`height: ${A??""}%;background-color: ${nt(o()),O(()=>o()[i])??""}`),B(d,`${nt(l()),O(()=>l()[i]||"")??""} `),B(_,` ${g??""}% `),B(y,` (${r(h)??""})`)},[()=>(r(h),r(e),r(s),nt(c()),O(()=>w(r(h),r(e),r(s),c()).toFixed(2))),()=>(r(h),r(s),O(()=>(r(h)/r(s)*100).toFixed(1)))],Y),P(v,f)}),F(x),P(a,x),oe()}function va(a){const t=a-1;return t*t*t+1}function ua(a,{from:t,to:e},s={}){var{delay:n=0,duration:o=T=>Math.sqrt(T)*120,easing:l=va}=s,c=getComputedStyle(a),w=c.transform==="none"?"":c.transform,[x,v]=c.transformOrigin.split(" ").map(parseFloat);x/=a.clientWidth,v/=a.clientHeight;var h=da(a),i=a.clientWidth/e.width/h,f=a.clientHeight/e.height/h,d=t.left+t.width*x,_=t.top+t.height*v,y=e.left+e.width*x,A=e.top+e.height*v,g=(d-y)*i,m=(_-A)*f,p=t.width/e.width,b=t.height/e.height;return{delay:n,duration:typeof o=="function"?o(Math.sqrt(g*g+m*m)):o,easing:l,css:(T,C)=>{var I=C*g,H=C*m,Z=T+C*p,L=T+C*b;return`transform: ${w} translate(${I}px, ${H}px) scale(${Z}, ${L});`}}}function da(a){if("currentCSSZoom"in a)return a.currentCSSZoom;for(var t=a,e=1;t!==null;)e*=+getComputedStyle(t).zoom,t=t.parentElement;return e}const ca=a=>a;function Xt(a,{delay:t=0,duration:e=400,easing:s=ca}={}){const n=+getComputedStyle(a).opacity;return{delay:t,duration:e,easing:s,css:o=>`opacity: ${o*n}`}}var ha=Q('<div class="svelte-1ijhx6h"><div class="barhead svelte-1ijhx6h"> </div> <div class="barmeat svelte-1ijhx6h"><!></div></div>'),_a=Q("<th> </th>"),pa=Q('<td class="svelte-1ijhx6h"> </td>'),ma=Q('<tr><td class="svelte-1ijhx6h"> </td><!></tr>'),xa=Q('<h1>Fixtures</h1> <div><button>Play</button></div> <h3 class="svelte-1ijhx6h"> </h3> <div class="barcontainer svelte-1ijhx6h"></div> <div> </div> <div><input type="range" min="1"/> <input type="range" min="3"/> <input type="range" min="1"/> </div> <div><table class="svelte-1ijhx6h"><thead><tr class="ulrow svelte-1ijhx6h"><th class="svelte-1ijhx6h">Head</th><!></tr></thead><tbody></tbody></table></div>',1);function Na(a,t){se(t,!1);const e=U(),s=U();let n="https://tmp-borza-public-cyx.s3.amazonaws.com/assets/data/pl-fixtures.json",o=U({sid:[],date:[],HG:[],AG:[],team:[],opposition:[],points_got:[],goaldiff:[],side:[],fixt:[],season_end_rank:[],did:[]});function l(u){let N,k=[],S=[];for(let E=0;E<r(o).sid.length;E++){let D=r(o).sid[E];D!=N&&(k.push(D),N=D);let $=r(o).season_end_rank[E];S[$]==null&&(S[$]={}),S[$][D]==null&&(S[$][D]=[]),S[$][D].push(r(o).did[E])}return{seasons:k,positions:S}}function c(u,N,k,S){const E=[];for(let[D,$]of Object.entries(u.positions)){let j=parseInt(D)<=N?0:1;E.length<=j&&E.push(p.map(()=>0));let z=!1;for(let[ht,rt]of Object.entries($))if(z){let{catI:K}=i(rt,k,S);E[j][K]+=1}else z=!0}return E}function w(u){return String(u%100).padStart(2,"0")+"/"+String((u+1)%100).padStart(2,"0")}function x(u){return u==1?"champ":u<5?"top4":u>17?"relegated":""}function v(u){let N="th";return u==1&&(N="st"),u==2&&(N="nd"),u==3&&(N="rd"),`${u}${N}`}function h(u,N,k){let S=0;for(let E=0;E<k;E++)S+=u[N+E];return S/k}function i(u,N,k){let S=h(u,N-1,k),E=0;for(;E<g.length&&S>p[E];)E++;return{cat:g[E],difficulty:S,color:m[E],catI:E}}function f(u,N){return u==H?"all teams, all seasons":N==0?u==1?"champions":`teams finishing top ${u}`:`bottom ${H-u}`}async function d(){for(const u of _)q(I,u.split),await na(u.ms)}const _=[{split:20,ms:1600},{split:10,ms:1600},{split:4,ms:1600},{split:17,ms:1600},{split:1,ms:1600}],y=500,A=300;let g=["easy","mild","hard","brutal"],m=["#ADE792","#49BEB7","#FACF5A","#FF5959"],p=[7.2,8.9,10.4,20];ge(async()=>{q(o,await fetch(n).then(u=>u.json()))});const b=38;let T=U(1),C=U(5),I=U(20),H=20,Z=.45;yt(()=>r(o),()=>{q(e,l(r(o)))}),yt(()=>(r(e),r(I),r(T),r(C)),()=>{q(s,c(r(e),r(I),r(T),r(C)))}),ne(),le();var L=xa(),J=R(mt(L),2),St=M(J);F(J);var X=R(J,2),lt=M(X);F(X);var tt=R(X,2);ft(tt,13,()=>r(s),ot,(u,N,k)=>{var S=ha(),E=M(S),D=M(E,!0);F(E);var $=R(E,2),j=M($);la(j,{get labels(){return g},get colors(){return m},get values(){return r(N)},maxRate:Z}),F($),F(S),at(z=>B(D,z),[()=>(r(I),O(()=>f(r(I),k)))],Y),sa(S,()=>ua,()=>({duration:y})),Qt(1,S,()=>Xt,()=>({duration:A,delay:y/2})),Qt(2,S,()=>Xt,()=>({duration:A})),P(u,S)}),F(tt);var et=R(tt,2),vt=M(et);F(et);var At=R(et,2),ut=M(At);Ot(ut);var jt=R(ut),dt=R(jt);Ot(dt);var Bt=R(dt),ct=R(Bt);Ot(ct),Rt(ct,"max",H);var de=R(ct);F(At);var Lt=R(At,2),zt=M(Lt),Tt=M(zt),Pt=M(Tt),ce=R(M(Pt));ft(ce,1,()=>(r(e),O(()=>r(e).positions)),ot,(u,N,k)=>{var S=$t(),E=mt(S);{var D=$=>{var j=_a(),z=M(j,!0);F(j),at((ht,rt)=>{ta(j,1,ht,"svelte-1ijhx6h"),B(z,rt)},[()=>Ke(O(()=>x(k))),()=>O(()=>v(k))],Y),P($,j)};kt(E,$=>{k>0&&$(D)})}P(u,S)}),F(Pt),F(Tt);var qt=R(Tt);ft(qt,5,()=>(r(e),O(()=>r(e).seasons.reverse())),ot,(u,N,k)=>{var S=$t(),E=mt(S);{var D=$=>{var j=ma(),z=M(j),ht=M(z,!0);F(z);var rt=R(z);ft(rt,1,()=>(r(e),r(N),r(T),r(C),O(()=>r(e).positions.map(K=>i(K[r(N)],r(T),r(C))))),ot,(K,_t,he)=>{var Gt=$t(),_e=mt(Gt);{var pe=Ct=>{var pt=pa(),me=M(pt,!0);F(pt),at(xe=>{fe(pt,`background-color: ${r(_t),O(()=>r(_t).color)??""};`),B(me,xe)},[()=>(r(_t),O(()=>r(_t).difficulty.toFixed(1)))],Y),P(Ct,pt)};kt(_e,Ct=>{he>0&&Ct(pe)})}P(K,Gt)}),F(j),at(K=>B(ht,K),[()=>(r(N),O(()=>w(r(N))))],Y),P($,j)};kt(E,$=>{r(e),O(()=>k<r(e).seasons.length-1)&&$(D)})}P(u,S)}),F(qt),F(zt),F(Lt),at(u=>{B(lt,`Difficulty of fixtures ${r(T)??""}-${r(T)+r(C)-1}`),B(vt,`Fixtures ${r(T)??""} - ${r(T)+r(C)-1}`),Rt(ut,"max",b-r(C)+1),B(jt,` start: ${r(T)??""} `),Rt(dt,"max",u),B(Bt,` len: ${r(C)??""} `),B(de,` split: ${r(I)??""}`)},[()=>(r(T),O(()=>Math.min(b-r(T),8)))],Y),Ze("click",St,d),Mt(ut,()=>r(T),u=>q(T,u)),Mt(dt,()=>r(C),u=>q(C,u)),Mt(ct,()=>r(I),u=>q(I,u)),P(a,L),oe()}export{Na as component};
